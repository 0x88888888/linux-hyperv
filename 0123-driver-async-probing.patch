From: Arjan van de Ven <arjan@linux.intel.com>
Subject: Make a few key drivers probe asynchronous

To help boot time, several drivers can safely be marked for probing asynchronously...



--- linux-4.6.1/drivers/net/ethernet/intel/e1000e/netdev.c~	2016-06-04 16:50:09.000000000 +0000
+++ linux-4.6.1/drivers/net/ethernet/intel/e1000e/netdev.c	2016-06-04 17:35:59.187260253 +0000
@@ -7482,6 +7482,7 @@
 	.remove   = e1000_remove,
 	.driver   = {
 		.pm = &e1000_pm_ops,
+		.probe_type = PROBE_PREFER_ASYNCHRONOUS,
 	},
 	.shutdown = e1000_shutdown,
 	.err_handler = &e1000_err_handler
--- linux-4.6.1/sound/pci/hda/hda_intel.c~	2016-06-01 19:18:22.000000000 +0000
+++ linux-4.6.1/sound/pci/hda/hda_intel.c	2016-06-04 17:36:44.310727342 +0000
@@ -2392,6 +2392,7 @@
 	.shutdown = azx_shutdown,
 	.driver = {
 		.pm = AZX_PM_OPS,
+		.probe_type = PROBE_PREFER_ASYNCHRONOUS,
 	},
 };
 
